var page=1;function load(e){document.getElementById("loading").style.display=null,document.getElementById("more").style.display="none";var t=new XMLHttpRequest;t.open("GET","/api/s?w="+encodeURIComponent(e)+"&p="+page),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&update(JSON.parse(t.responseText),e)},t.send()}function update(e,t){document.getElementById("more").style.display=e.more?null:"none",document.getElementById("loading").style.display="none";const n=document.querySelector(".search-result-container"),s=document.querySelector(".search-result-list"),o=document.getElementById("search-stats");1==e.page&&(0===e.resultItems.length?(n.classList.remove("no-result"),o.innerText="未找到搜索结果"):(o.innerText=`找到 ${e.length} 个搜索结果`,s.innerHTML="",s.classList.remove("no-result"))),s.innerHTML+=e.resultItems.map((e=>e.item)).join("")}function more(){document.getElementById("more").style.display="none",document.getElementById("loading").style.display=null,page++,load(document.querySelector(".search-input").value,page)}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".search-input"),t=document.querySelector(".search-button");t.addEventListener("click",(()=>{const t=e.value.trim().toLowerCase().split(/[-\s]+/);page=1;const n=document.querySelector(".search-result-container"),s=e.value;1===t.length&&""===t[0]?n.classList.add("no-result"):(document.getElementById("search-stats").innerHTML="",document.querySelector(".search-result-list").classList.add("no-result"),n.classList.remove("no-result"),load(s,1))})),t.disabled=!1}));